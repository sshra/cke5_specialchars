!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.CKEditor5=n():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.specialchars=n())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/specialchars/src/command.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SpecialcharsCommand)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/**\n * @file\n * Defines the Command plugin.\n */\n\n\n\n/**\n * The specialchars command.\n *\n * @extends module:core/command~Command\n */\nclass SpecialcharsCommand extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    // Toolbar button is always enabled.\n    this.isEnabled = true;\n  }\n\n  /**\n   * @inheritDoc / options: { code: TEXT-TO-INSERT }\n   */\n  execute(options = {} ) {\n    const textData = options.code || '';\n\n    const editor = this.editor;\n    const { model } = editor;\n\n    model.change((writer) => {\n      const selection = model.document.selection;\n      const position = selection.getFirstPosition();\n\n      writer.insertText( this._decodeHtmlEntities(textData), position);\n    });\n  }\n\n  // Функция для декодирования HTML-сущностей\n  _decodeHtmlEntities(text) {\n    const textarea = document.createElement('textarea');\n    textarea.innerHTML = text;\n    return textarea.value;\n  }\n\n}\n\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/ckeditor5_plugins/specialchars/src/command.js?")},"./js/ckeditor5_plugins/specialchars/src/editing.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ SpecialcharsEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./command */ "./js/ckeditor5_plugins/specialchars/src/command.js");\n/**\n * @file\n * Defines the Editing plugin.\n */\n\n/**\n * @module specialchars/SpecialcharsEditing\n */\n\n\n\n\n/**\n * The editing feature.\n *\n * It introduces the \'Specialchars\' aspects in the model.\n *\n * @extends module:core/plugin~Plugin\n */\nclass SpecialcharsEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n  /**\n   * @inheritDoc\n   */\n  init() {\n\n    const editor = this.editor;\n\n    // Attaching the command to the editor.\n    editor.commands.add(\n      \'specialcharsCommand\',\n      new _command__WEBPACK_IMPORTED_MODULE_1__["default"](editor),\n    );\n\n  }\n\n}\n\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/ckeditor5_plugins/specialchars/src/editing.js?')},"./js/ckeditor5_plugins/specialchars/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _editing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editing */ "./js/ckeditor5_plugins/specialchars/src/editing.js");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ "./js/ckeditor5_plugins/specialchars/src/ui.js");\n/**\n * @file\n * Defines the Specialchars plugin.\n */\n\n/**\n * @module specialchars/Specialchars\n */\n\n\n\n\n\n/**\n * The Specialchars plugin.\n *\n * This is a "glue" plugin that loads\n *\n * @extends module:core/plugin~Plugin\n */\nclass Specialchars extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_editing__WEBPACK_IMPORTED_MODULE_1__["default"], _ui__WEBPACK_IMPORTED_MODULE_2__["default"]];\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return \'plugSpecialchars\';\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  Specialchars,\n});\n\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/ckeditor5_plugins/specialchars/src/index.js?')},"./js/ckeditor5_plugins/specialchars/src/ui.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SpecialcharsUI)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var _ui_formview__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui/formview */ \"./js/ckeditor5_plugins/specialchars/src/ui/formview.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _icons_special_btn_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../icons/special-btn.svg */ \"./js/icons/special-btn.svg\");\n/**\n * @file\n * Defines the UI plugin.\n */\n\n/**\n * @module specialchars/SpecialcharsUI\n */\n\n\n\n\n\n\n/**\n * The UI plugin. It introduces the button and the forms.\n *\n * It uses the\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon plugin}.\n *\n * @extends module:core/plugin~Plugin\n */\nclass SpecialcharsUI extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n  /**\n   * @inheritDoc\n   */\n  static get requires() {\n    return [ ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_2__.ContextualBalloon ];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  init() {\n    // Create the balloon.\n    this._balloon = this.editor.plugins.get( ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_2__.ContextualBalloon );\n    this.formView = this._createFormView();\n    this.isVisible = false;\n    this._addToolbarButtons();\n  }\n\n/**\n   * Creates the form view.\n   *\n   * @returns {FormView}\n   *   The form view instance.\n   *\n   * @private\n   */\n  _createFormView() {\n    // The FormView defined in src/ui/formview.js\n    const textFormatSettings = this.editor.config.get('specialchars')\n    const formView = new _ui_formview__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this, textFormatSettings);\n\n    this.listenTo(formView.cancelButtonView, 'execute', () => {\n      this._hideUI();\n    });\n\n    return formView;\n  }\n\n  /**\n   * Adds the {@link #FormView} to the balloon and sets the form values.\n   *\n   * @private\n   */\n  _addFormView() {\n\n    if (this._balloon.hasView(this.formView)) {\n      this._balloon.remove(this.formView);\n    }\n\n    this._balloon.add({\n      view: this.formView,\n      position: this._getBalloonPositionData(),\n      balloonClassName: 'specialchars_balloon',\n    });\n\n//    this.editor.execute('specialcharsCommand', { mode: 'on' });\n\n    // Reset the focus to the first form element.\n    this.formView.focus();\n  }\n\n\n  /**\n   * Shows the UI.\n   *\n   * @private\n   */\n  _showUI() {\n    this.isVisible = true;\n    this._addFormView();\n  }\n\n\n  /**\n   * Hide the UI.\n   *\n   * @private\n   */\n  _hideUI() {\n    this.isVisible = false;\n    const formView = this.formView;\n\n     if (this._balloon.hasView(formView)) {\n      this._balloon.remove(formView);\n    }\n\n    // Focus the editing view after closing the form view.\n    this.editor.editing.view.focus();\n  }\n\n  /**\n   * Adds the toolbar buttons.\n   *\n   * @private\n   */\n  _addToolbarButtons() {\n    this._register_button();\n  }\n\n  /**\n   * Special Chars button\n   */\n  _register_button() {\n    const editor = this.editor;\n\n    editor.ui.componentFactory.add('specialchars', (locale) => {\n      const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_2__.ButtonView(locale);\n\n      // Create the toolbar button.\n      buttonView.set({\n        label: editor.t('Special Chars Button'),\n        icon: _icons_special_btn_svg__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n        tooltip: true\n      });\n\n      // Bind button to the command.\n      // The state on the button depends on the command values.\n      const command = editor.commands.get('specialcharsCommand');\n      buttonView.bind( 'isEnabled' ).to( command, 'isEnabled' );\n      buttonView.bind( 'isOn' ).to( command, 'value', value => !!value );\n\n      // On tool button click.\n      this.listenTo(buttonView, 'execute', () => {\n        if (this.isVisible) {\n          this._hideUI();\n        } else {\n          this._showUI();\n        }\n      });\n\n      return buttonView;\n    });\n  }\n\n  /**\n   * Gets balloon position.\n   *\n   * @returns {{target: (function(): *)}}\n   *\n   * @private\n   */\n  _getBalloonPositionData() {\n    const view = this.editor.editing.view;\n    const viewDocument = view.document;\n    let target = null;\n\n    // Set a target position by converting view selection range to DOM.\n    target = () => view.domConverter.viewRangeToDom(\n      viewDocument.selection.getFirstRange()\n    );\n\n    return {\n      target\n    };\n  }\n\n}\n\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/ckeditor5_plugins/specialchars/src/ui.js?")},"./js/ckeditor5_plugins/specialchars/src/ui/formview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FormView)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var _tag_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tag.js */ \"./js/ckeditor5_plugins/specialchars/src/ui/tag.js\");\n/**\n * @file\n * Defines the FormView View class.\n */\n\n/**\n * @module specialchars/ui/FormView\n */\n\n\n\n\n\n/**\n * The FormView class.\n *\n * This view displays an editing form.\n *\n * @extends module:ui/view~View\n */\nclass FormView extends ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__.View {\n\n  /**\n   * @inheritDoc\n   */\n  constructor( ui, textFormatSettings ) {\n    const locale = ui.editor.locale;\n    super( locale );\n\n    const symbols = textFormatSettings['chartable']\n      .split( '\\n' )\n      .map( s => s.trim().split('|'))\n      .filter( sym => sym.length == 3 )\n\n    this.buttons = {};\n    let i = 0;\n\n    for (const symbol of symbols) {\n      // Tools.\n      this.buttons['sym_' + i] = this._createButton(\n        symbol[0], null, ['button', 'form-submit'], symbol[2]\n      );\n\n      this.listenTo(this.buttons['sym_' + i], 'execute', () => {\n        ui.editor.execute('specialcharsCommand', { code: symbol[1] })\n        ui._hideUI();\n      });\n\n      i ++;\n    }\n\n    // Create the cancel button.\n    this.cancelButtonView = this._createButton(\n      'Cancel', ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_1__.icons.cancel, ['button', 'form-submit', 'ck-button-cancel']\n    );\n\n    this.childViewsCollection = this.createCollection([\n\n      new _tag_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.locale, 'div', {\n        attributes: {\n          class: [],\n          tabindex: '-1',\n          style: 'margin: 5px 10px'\n        },\n        children: [\n          new _tag_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.locale, 'strong', {\n            text: 'Спец. символы',\n          }),\n        ]\n      }),\n\n      new _tag_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.locale, 'div', {\n        attributes: {\n          class: [],\n          tabindex: '-1',\n          style: 'margin: 5px; max-width: 250px; white-space: normal'\n        },\n        children: Object.values(this.buttons)\n      }),\n\n      new _tag_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.locale, 'div', {\n        attributes: {\n          class: [],\n          tabindex: '-1',\n          style: 'margin: 5px'\n        },\n        children: [\n          this.cancelButtonView\n        ]\n      }),\n    ]);\n\n    this.setTemplate( {\n      tag: 'form',\n      attributes: {\n        class: [ 'ck', 'ck-bbutton-link-form', 'ck-reset_all-excluded' ],\n        // https://github.com/ckeditor/ckeditor5-image/issues/40\n        tabindex: '-1'\n      },\n      children: this.childViewsCollection\n    } );\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  render() {\n    super.render();\n\n    // Submit the form when the user clicked the save button\n    // or pressed enter in the input.\n    (0,ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__.submitHandler)( {\n      view: this\n    } );\n  }\n\n  /**\n   * Focus on the first form element.\n   */\n  focus() {\n    // this.childViewsCollection.get(1).children.get(0).focus();\n  }\n\n  /**\n   * Creates an input field.\n   *\n   * @param {string} label\n   *   Input field label.\n   * @param {object} options\n   *   Options.\n   *\n   * @returns {module:ui/labeledfield/labeledfieldview~LabeledFieldView}\n   *   The labeled field view class instance.\n   *\n   * @private\n   */\n  _createInput(label, options = {}) {\n    const labeledFieldView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__.LabeledFieldView(this.locale, ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__.createLabeledInputText);\n    labeledFieldView.label = label;\n\n    // Sets the required attribute when needed.\n    if (options.required && options.required === true) {\n      labeledFieldView.fieldView.extendTemplate({\n        attributes: {\n          required: true,\n          class: ['form-text', 'form-element']\n        }\n      });\n    }\n\n    labeledFieldView.setTemplate({\n      tag: 'div',\n      attributes: {\n        class: [ 'form-item' ],\n      },\n      children: [labeledFieldView.template]\n    });\n\n    return labeledFieldView;\n  }\n\n  /**\n   * Creates button.\n   *\n   * @param {string} label\n   *   Button label.\n   * @param {module:ui/icon/iconview~IconView} icon\n   *   Button icon.\n   * @param {string} className\n   *   HTML class.\n   *\n   * @returns {module:ui/button/buttonview~ButtonView}\n   *   The button view class instance.\n   *\n   * @private\n   */\n  _createButton( label, icon, className, tooltip ) {\n    const button = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__.ButtonView();\n\n    button.set({\n      label,\n      icon,\n      class: className,\n      tooltip,\n      withText: true\n    });\n\n    return button;\n  }\n\n}\n\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/ckeditor5_plugins/specialchars/src/ui/formview.js?")},"./js/ckeditor5_plugins/specialchars/src/ui/tag.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ TagView)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/ui */ "ckeditor5/src/ui.js");\n/**\n * @file\n * Defines the TagView View class.\n */\n\n/**\n * @module specialchars/ui/TagView\n */\n\n\n\n/**\n * The TagView class.\n *\n * @extends module:ui/view~View\n */\nclass TagView extends ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_0__.View {\n\n  /**\n   * @inheritDoc\n   */\n  constructor( locale, tag, options = { attributes : {}}) {\n    super( locale );\n\n    if (options.text) {\n      this.setTemplate( {\n        tag,\n        attributes: options.attributes ? options.attributes : {},\n        children: options.children\n        ? options.children\n        : [ { text: options.text }]\n      });\n    } else {\n      this.setTemplate( {\n        tag,\n        attributes: options.attributes ? options.attributes : {},\n        children: options.children\n        ? options.children\n        : []\n      });\n\n    }\n\n    this.setTemplate( {\n      tag,\n      attributes: options.attributes ? options.attributes : {},\n      children: options.children\n      ? options.children\n      : options.text\n        ? [ { text: options.text }]\n        : []\n    });\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  render() {\n    super.render();\n  }\n\n}\n\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/ckeditor5_plugins/specialchars/src/ui/tag.js?')},"./js/icons/special-btn.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 576 512\\">\\n<path d=\\"M392.9 32.4C400.6 31.1 408.6 32.9 414.1 37.4C498.2 96.1 544 173.7 544 255.1C544 338.2 498.2 415.9 414.1 474.6C409.3 478.6 402.4 480.5 395.5 479.9C388.5 479.3 382 476.3 377.1 471.4L193.7 288.7C188.1 283.2 185 275.7 184.1 267.8C184.1 260 188.1 252.5 193.6 246.9C199.2 241.4 206.7 238.2 214.5 238.2C222.4 238.2 229.9 241.3 235.4 246.8L400.5 411.2C455.1 366.5 484.8 312 484.8 255.1C484.8 193.5 447.9 132.9 380.9 85.8C374.5 81.2 370.1 74.4 368.8 66.6C367.4 58.9 369.2 50.9 373.8 44.5C378.3 38.1 385.2 33.8 392.9 32.4V32.4zM186.9 479.6C179.2 480.9 171.3 479.1 164.8 474.6C81.7 415.9 35.8 338.2 35.8 255.1C35.8 173.7 81.7 96.1 164.8 37.4C170.5 33.4 177.4 31.5 184.4 32.1C191.3 32.7 197.8 35.7 202.7 40.6L386.1 223.3C391.7 228.8 394.8 236.3 394.8 244.2C394.9 251.1 391.8 259.5 386.2 265.1C380.7 270.6 373.2 273.8 365.3 273.8C357.5 273.8 349.1 270.7 344.4 265.2L179.3 100.7C124.7 145.9 95 199.9 95 255.1C95 318.5 131.9 379.1 198.1 426.2C205.4 430.8 209.7 437.6 211.1 445.4C212.4 453.1 210.6 461.1 206.1 467.5C201.6 473.9 194.7 478.2 186.9 479.6V479.6z\\"/>\\n</svg>");\n\n//# sourceURL=webpack://CKEditor5.specialchars/./js/icons/special-btn.svg?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.specialchars/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.specialchars/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/specialchars/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));